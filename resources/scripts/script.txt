
::This is a test for the new synthax of the kagerou project fangame novel engine.
::The kagescan game is a bit different than other novel engines, because there is a map and label whill be executed only if the player interacts with the map.
::Like pokemon ! but in a event, it is a visual novel.
::The new synthax is based of the ren'py scripts.
::I will implement soon conditions (if else statements but not loop !)

:: TODO :
::varfile "resources/saves/main.save"
::mapfile "resources/map/couloir.txt"
:: choices and animations

::var declarations

entity <character> Shintaro
set <color> Shintaro = #ff0000
entity <character> Logan
set <color> Logan = #ff0fff

::entity <sound> chairs="resources/noises/oldDays-chairs.ogg"

entity <image> shintaroDefault="resources/img/characters/shintaro/default.png"
entity <image> shintaroScream="resources/img/characters/shintaro/scream.png"
entity <image> shintaroScary="resources/img/characters/shintaro/scary.png"
entity <image> backgroundClassroom="resources/img/background/classroom.night.jpg"
entity <music> ost03="resources/sounds/OST03.ogg"

set <color> __bar__ = #ffffffaa
set <image> __scene__ = backgroundClassroom

set <image> Shintaro = shintaroDefault
set <image> Logan = shintaroScream
set <name> Shintaro = LoganTheBest#2885
set <name> Logan = MAMAN sama


set scrw = 1080
set /c right = %scrw% + 40
set /c center = %scrw%/2 - 20
set outsideL = -40

:part1
  echo ceci est la partie 1
  :: animate <object> variable finalValue easing duration beforeValue
  animate <position> Shintaro /from %scrw% /to %right% /ease outExpo /time 1500 
  music ost03 play loop
  say Shintaro "First line" "Second Line" "and the final line !"
  say Logan "Starfoullah..."
  end up
  :: music chairs play
  animate <position> Logan /from %outsideL% /to %center% /ease outExpo /time 1500
  animate <spriteChange> Logan /to shintaroScary /ease outExpo /time 300
  say Logan "Quel est ton perso préféré"
  echo en train de faire un choix
  choice "Karin"=hope | "Yaki"=noHope
  goto hope

:ok
  say Logan "Starf j'préfère Karrin"
  music ost03 stop
  :: $ay works with wait command
  $ay KARIN_LE_DIEU "Pour la peine je vais bloquer le jeu durant 4 secondes..." "... ... ..." "y compris mon temps de parole."
  wait 4000

  goto ende
  say Shintaro "GEH"


:hope
  say Shintaro "Great !"
  echo HOPE
goto ok


:noHope
  say Logan "NOPE"
  echo NoHOPE
goto ende

:ende
  say Shintaro "j'aime YAKI :P "
  $ay Shintaro "Bye"
  wait pause
  end up
